<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haruka-Yang - Personal Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Quicksand:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Three.js for GPU-accelerated rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- i18next for internationalization -->
    <script src="https://unpkg.com/i18next@23.11.5/i18next.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --sky-deep: #0a1628;
            --sky-mid: #1a2a4a;
            --sky-purple: #3d2a5c;
            --sky-warm: #5c3d5c;
            --horizon-pink: #8b5a6b;
            --horizon-orange: #c4785a;
            --horizon-gold: #d4a574;
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --meteor-blue: #4fc3f7;
            --meteor-core: #e0f7fa;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
            background: var(--sky-deep);
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* WebGL Background */
        #sky-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        #sky-container canvas {
            display: block;
        }

        /* Custom Cursor */
        *, *::before, *::after {
            cursor: none !important;
        }

        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
        }

        .custom-cursor::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, rgba(255,255,255,0.95) 0%, rgba(79,195,247,0.7) 60%, transparent 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 8px rgba(79, 195, 247, 0.5);
            animation: cursorTwinkle 2s ease-in-out infinite;
        }

        .custom-cursor::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 24px;
            height: 24px;
            border: 1px solid rgba(79, 195, 247, 0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.15s ease, height 0.15s ease, border-color 0.15s ease, background 0.15s ease;
            animation: cursorPulse 2.5s ease-in-out infinite;
        }

        @keyframes cursorTwinkle {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 0 8px rgba(79, 195, 247, 0.5);
            }
            50% {
                opacity: 0.6;
                box-shadow: 0 0 15px rgba(79, 195, 247, 0.8);
            }
        }

        @keyframes cursorPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.5;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.8;
            }
        }

        .custom-cursor.clicking::after {
            width: 18px;
            height: 18px;
            border-color: rgba(79, 195, 247, 0.9);
            background: rgba(79, 195, 247, 0.1);
            animation: none;
        }

        .custom-cursor.clicking::before {
            box-shadow: 0 0 12px rgba(79, 195, 247, 0.9);
            animation: none;
        }

        /* Cursor hover state for interactive elements */
        .custom-cursor.hovering::after {
            width: 36px;
            height: 36px;
            border-color: rgba(79, 195, 247, 0.6);
            background: rgba(79, 195, 247, 0.05);
        }

        /* Hide custom cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
            *, *::before, *::after {
                cursor: auto !important;
            }
            .custom-cursor {
                display: none !important;
            }
        }

        /* Gradient Overlay for depth */
        .gradient-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                transparent 40%,
                rgba(93, 63, 106, 0.1) 60%,
                rgba(139, 90, 107, 0.15) 75%,
                rgba(196, 120, 90, 0.1) 90%,
                rgba(212, 165, 116, 0.08) 100%
            );
            z-index: 1;
            pointer-events: none;
        }

        /* Atmospheric haze at horizon */
        .horizon-glow {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: radial-gradient(
                ellipse 150% 60% at 50% 100%,
                rgba(212, 165, 116, 0.12) 0%,
                rgba(196, 120, 90, 0.08) 30%,
                rgba(139, 90, 107, 0.05) 60%,
                transparent 100%
            );
            z-index: 1;
            pointer-events: none;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            position: relative;
            z-index: 10;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 28px 50px;
            z-index: 100;
            background: transparent;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav.scrolled {
            background: rgba(10, 22, 40, 0.85);
            backdrop-filter: blur(20px);
            padding: 18px 50px;
            border-bottom: 1px solid var(--glass-border);
        }

        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 50px;
        }

        .nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav a::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            width: 0;
            height: 1px;
            background: var(--meteor-blue);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav a:hover {
            color: var(--text-primary);
        }

        .nav a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            z-index: 2;
            padding: 0 20px;
        }

        .hero-content h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(48px, 10vw, 96px);
            font-weight: 300;
            letter-spacing: 0.15em;
            margin-bottom: 25px;
            padding-bottom: 5px;
            line-height: 1.3;
            background: linear-gradient(
                135deg,
                var(--text-primary) 0%,
                rgba(255, 255, 255, 0.8) 50%,
                var(--meteor-blue) 100%
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            opacity: 0;
        }

        .hero-content p {
            font-size: clamp(16px, 2.5vw, 22px);
            font-weight: 300;
            letter-spacing: 0.3em;
            color: var(--text-secondary);
            margin-bottom: 50px;
            animation: fadeInUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.2s forwards;
            opacity: 0;
        }

        .cta-button {
            display: inline-block;
            padding: 16px 50px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--text-primary);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 3px;
            text-transform: uppercase;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.4s forwards;
            opacity: 0;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(79, 195, 247, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover {
            border-color: var(--meteor-blue);
            box-shadow: 0 0 30px rgba(79, 195, 247, 0.2);
            transform: translateY(-2px);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            animation: fadeInUp 1.2s cubic-bezier(0.4, 0, 0.2, 1) 0.8s forwards;
            opacity: 0;
        }

        .scroll-indicator span {
            font-size: 11px;
            letter-spacing: 3px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .scroll-line {
            width: 1px;
            height: 50px;
            background: linear-gradient(to bottom, var(--text-secondary), transparent);
            animation: scrollPulse 2s ease-in-out infinite;
        }

        @keyframes scrollPulse {
            0%, 100% { transform: scaleY(1); opacity: 0.5; }
            50% { transform: scaleY(1.2); opacity: 1; }
        }

        /* Sections */
        .section {
            position: relative;
            padding: 120px 50px;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            z-index: -1;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .section-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(36px, 6vw, 56px);
            font-weight: 300;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .section-header p {
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.2em;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* About Section */
        .about-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: center;
        }

        .about-text h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 32px;
            font-weight: 400;
            margin-bottom: 30px;
            letter-spacing: 0.05em;
        }

        .about-text p {
            margin-bottom: 24px;
            line-height: 2;
            font-weight: 300;
            color: var(--text-secondary);
            font-size: 15px;
        }

        .about-image {
            position: relative;
            height: 500px;
            overflow: hidden;
        }

        .about-image::before {
            content: '';
            position: absolute;
            inset: 0;
            border: 1px solid var(--glass-border);
            z-index: 2;
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(20%) contrast(1.05);
            transition: all 0.6s ease;
        }

        .about-image:hover img {
            filter: grayscale(0%) contrast(1);
            transform: scale(1.03);
        }

        /* Portfolio Section */
        .portfolio-grid {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 50px;
        }

        .portfolio-item {
            position: relative;
            height: 320px;
            background: linear-gradient(
                145deg,
                rgba(255, 255, 255, 0.04) 0%,
                rgba(255, 255, 255, 0.01) 100%
            );
            border: 1px solid var(--glass-border);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .portfolio-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(
                ellipse at 50% 50%,
                rgba(79, 195, 247, 0.08) 0%,
                transparent 70%
            );
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .portfolio-item::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(10, 22, 40, 0.4) 100%
            );
            pointer-events: none;
        }

        .portfolio-item:hover {
            transform: translateY(-8px);
            border-color: rgba(79, 195, 247, 0.4);
            box-shadow:
                0 25px 50px rgba(0, 0, 0, 0.25),
                0 0 40px rgba(79, 195, 247, 0.1);
        }

        .portfolio-item:hover::before {
            opacity: 1;
        }

        .portfolio-overlay {
            position: relative;
            z-index: 2;
            padding: 40px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .portfolio-overlay h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 32px;
            font-weight: 400;
            margin-bottom: 12px;
            letter-spacing: 0.08em;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--meteor-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .portfolio-overlay p {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 28px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-weight: 300;
        }

        .more-info-button {
            display: inline-block;
            padding: 14px 32px;
            background: transparent;
            border: 1px solid rgba(79, 195, 247, 0.4);
            color: var(--text-primary);
            text-decoration: none;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .more-info-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(79, 195, 247, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .more-info-button:hover {
            background: rgba(79, 195, 247, 0.15);
            border-color: var(--meteor-blue);
            box-shadow: 0 0 25px rgba(79, 195, 247, 0.2);
            transform: translateY(-2px);
        }

        .more-info-button:hover::before {
            left: 100%;
        }

        /* LinguaHaru Card */
        .portfolio-item--linguaharu {
            height: 320px;
            cursor: default;
        }

        .portfolio-mascot {
            width: 200px;
            height: 100px;
            overflow: hidden;
            margin-bottom: 16px;
            filter: drop-shadow(0 4px 16px rgba(0, 0, 0, 0.3))
                    drop-shadow(0 0 20px rgba(79, 195, 247, 0.06));
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .portfolio-item--linguaharu:hover .portfolio-mascot {
            filter: drop-shadow(0 8px 24px rgba(0, 0, 0, 0.4))
                    drop-shadow(0 0 28px rgba(79, 195, 247, 0.12));
            transform: translateY(-3px);
        }

        .portfolio-mascot img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .portfolio-actions {
            display: flex;
            gap: 14px;
            align-items: center;
        }

        .portfolio-actions .more-info-button {
            display: inline-flex;
            align-items: center;
            gap: 7px;
            padding: 10px 22px;
            font-size: 12px;
        }

        .portfolio-actions .more-info-button svg {
            flex-shrink: 0;
            opacity: 0.85;
        }

        .action-github:hover svg {
            opacity: 1;
        }

        .action-demo:hover svg {
            opacity: 1;
        }


        /* Contact Section */
        .contact-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 50px;
            margin-top: 60px;
        }

        .contact-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.4s ease;
        }

        .contact-link-icon {
            width: 70px;
            height: 70px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .contact-link-icon img {
            width: 28px;
            height: 28px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .contact-link:hover .contact-link-icon {
            transform: translateY(-8px);
            border-color: var(--meteor-blue);
            box-shadow: 0 15px 40px rgba(79, 195, 247, 0.2);
        }

        .contact-link:hover .contact-link-icon img {
            opacity: 1;
        }

        .contact-link span {
            font-size: 13px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .contact-link:hover span {
            color: var(--text-primary);
        }

        /* Language Switcher */
        .lang-switcher {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 101;
        }

        .lang-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            padding: 8px 14px;
            font-size: 13px;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Quicksand', sans-serif;
        }

        .lang-btn:hover {
            border-color: var(--meteor-blue);
            color: var(--text-primary);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: rgba(10, 22, 40, 0.95);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(20px);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .lang-switcher:hover .lang-dropdown,
        .lang-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .lang-option {
            padding: 12px 16px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lang-option:hover {
            background: rgba(79, 195, 247, 0.1);
            color: var(--text-primary);
        }

        .lang-option.active {
            color: var(--meteor-blue);
        }

        .lang-flag {
            font-size: 16px;
        }

        /* Social Sidebar */
        .social-sidebar {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 100;
        }

        .social-sidebar a {
            width: 44px;
            height: 44px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .social-sidebar a:hover {
            transform: translateX(-5px);
            border-color: var(--meteor-blue);
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .social-sidebar img {
            width: 20px;
            height: 20px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .social-sidebar a:hover img {
            opacity: 1;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            position: relative;
            width: 50vw;
            max-width: 400px;
            min-width: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            margin: 20px;
        }

        .modal-content img {
            width: 100%;
            height: auto;
            object-fit: contain;
            max-width: 100%;
            border: 1px solid var(--glass-border);
        }

        .close-modal {
            position: absolute;
            top: -15px;
            right: -15px;
            color: var(--text-primary);
            font-size: 18px;
            cursor: pointer;
            background: var(--sky-deep);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1010;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            border-color: var(--meteor-blue);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .lang-switcher {
                right: 25px;
            }

            .lang-btn {
                padding: 6px 10px;
                font-size: 12px;
            }

            .nav {
                padding: 20px 25px;
            }

            .nav ul {
                gap: 20px;
            }

            .nav a {
                font-size: 12px;
                letter-spacing: 1px;
            }

            .section {
                padding: 80px 25px;
            }

            .about-content {
                grid-template-columns: 1fr;
                gap: 50px;
            }

            .about-image {
                height: 350px;
            }

            .portfolio-grid {
                grid-template-columns: 1fr;
                max-width: 450px;
                gap: 30px;
            }

            .portfolio-item {
                height: 280px;
            }

            .portfolio-item--linguaharu {
                height: 280px;
            }

            .portfolio-mascot {
                width: 170px;
                height: 85px;
                margin-bottom: 12px;
            }

            .portfolio-actions .more-info-button {
                padding: 9px 16px;
                font-size: 11px;
            }

            .portfolio-overlay h3 {
                font-size: 26px;
            }

            .social-sidebar {
                right: 15px;
                gap: 15px;
            }

            .social-sidebar a {
                width: 38px;
                height: 38px;
            }

            .contact-links {
                gap: 30px;
            }

            .contact-link-icon {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .nav ul {
                gap: 12px;
            }

            .nav a {
                font-size: 11px;
            }

            .section {
                padding: 60px 20px;
            }

            .section-header {
                margin-bottom: 50px;
            }

            .about-image {
                height: 280px;
            }

            .portfolio-item {
                height: 240px;
            }

            .portfolio-item--linguaharu {
                height: 260px;
            }

            .portfolio-mascot {
                width: 140px;
                height: 70px;
                margin-bottom: 10px;
            }

            .portfolio-actions {
                gap: 10px;
            }

            .portfolio-actions .more-info-button {
                padding: 8px 14px;
                font-size: 11px;
                gap: 5px;
            }

            .portfolio-overlay {
                padding: 20px;
            }

            .portfolio-overlay h3 {
                font-size: 22px;
            }

            .portfolio-overlay p {
                font-size: 12px;
                margin-bottom: 20px;
            }

            .more-info-button {
                padding: 12px 24px;
                font-size: 11px;
            }

            .contact-link-icon {
                width: 55px;
                height: 55px;
            }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="custom-cursor" id="custom-cursor"></div>

    <div id="sky-container"></div>
    <div class="gradient-overlay"></div>
    <div class="horizon-glow"></div>

    <div class="container">
        <nav class="nav">
            <ul>
                <li><a href="#home" data-i18n="nav.home">Home</a></li>
                <li><a href="#about" data-i18n="nav.about">About</a></li>
                <li><a href="#portfolio" data-i18n="nav.works">Works</a></li>
                <li><a href="#contact" data-i18n="nav.contact">Contact</a></li>
                <li><a href="materials.html" data-i18n="nav.materials">Materials</a></li>
            </ul>
            <!-- Language Switcher -->
            <div class="lang-switcher">
                <button class="lang-btn" id="langBtn">
                    <span class="lang-flag" id="currentFlag">üåê</span>
                    <span id="currentLang">EN</span>
                    <span>‚ñº</span>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="en-US">
                        <span class="lang-flag">üá∫üá∏</span>
                        <span>English</span>
                    </div>
                    <div class="lang-option" data-lang="zh-CN">
                        <span class="lang-flag">üá®üá≥</span>
                        <span>‰∏≠Êñá</span>
                    </div>
                    <div class="lang-option" data-lang="ja-JP">
                        <span class="lang-flag">üáØüáµ</span>
                        <span>Êó•Êú¨Ë™û</span>
                    </div>
                </div>
            </div>
        </nav>

        <section class="hero" id="home">
            <div class="hero-content">
                <h1>Haruka Yang</h1>
                <p data-i18n="hero.subtitle">Welcome to My Universe</p>
                <a href="#about" class="cta-button" data-i18n="hero.cta">Explore</a>
            </div>
            <div class="scroll-indicator">
                <span data-i18n="hero.scroll">Scroll</span>
                <div class="scroll-line"></div>
            </div>
        </section>

        <section class="section about" id="about">
            <div class="section-header">
                <h2 data-i18n="about.title">About Me</h2>
                <p data-i18n="about.subtitle">A Developer with Passion for Innovation</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3 data-i18n="about.greeting">Hello, I'm Haruka Yang</h3>
                    <p data-i18n="about.p1">I am a full-stack developer with a deep passion for crafting elegant and efficient digital experiences. I love transforming creative visions into reality through code.</p>
                    <p data-i18n="about.p2">My journey began with a curiosity for technology, evolving into a relentless pursuit of innovation and excellence. I explore the intersection where technology meets artistry.</p>
                    <p data-i18n="about.p3">When I'm not coding, you'll find me exploring emerging technologies, reading, or contemplating my next creative project over a cup of coffee.</p>
                </div>
                <div class="about-image">
                    <img src="imgs/my_pic.jpg" alt="Haruka Yang">
                </div>
            </div>
        </section>

        <section class="section portfolio" id="portfolio">
            <div class="section-header">
                <h2 data-i18n="portfolio.title">My Works</h2>
                <p data-i18n="portfolio.subtitle">Selected Projects</p>
            </div>
            <div class="portfolio-grid">
                <div class="portfolio-item" onclick="location.href='https://haruwine.harukayang.xyz'">
                    <div class="portfolio-overlay">
                        <h3>HaruWine</h3>
                        <p data-i18n="portfolio.haruwine.desc">AI Cocktail Sommelier</p>
                        <a href="https://haruwine.harukayang.xyz" class="more-info-button" onclick="event.stopPropagation()" data-i18n="portfolio.visitSite">Visit Site</a>
                    </div>
                </div>
                <div class="portfolio-item portfolio-item--linguaharu">
                    <div class="portfolio-overlay">
                        <div class="portfolio-mascot">
                            <img src="imgs/ico.png" alt="LinguaHaru">
                        </div>
                        <p data-i18n="portfolio.linguaharu.desc">Open-source AI Document Translator</p>
                        <div class="portfolio-actions">
                            <a href="https://github.com/YANG-Haruka/LinguaHaru" target="_blank" class="more-info-button action-github" onclick="event.stopPropagation()">
                                <svg viewBox="0 0 16 16" width="14" height="14" fill="currentColor"><path d="M8 .198a8 8 0 0 0-2.529 15.591c.4.074.547-.174.547-.385 0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.889-1.171-.889-1.171-.726-.497.055-.487.055-.487.803.057 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.869.508-1.069-1.777-.202-3.645-.889-3.645-3.953 0-.874.312-1.588.824-2.148-.083-.202-.357-1.016.078-2.117 0 0 .672-.215 2.201.82A7.672 7.672 0 0 1 8 4.066c.68.003 1.364.092 2.003.269 1.527-1.035 2.198-.82 2.198-.82.436 1.101.162 1.915.08 2.117.513.56.823 1.274.823 2.148 0 3.072-1.871 3.749-3.653 3.947.287.248.543.735.543 1.481 0 1.07-.009 1.932-.009 2.195 0 .213.144.462.55.384A8.001 8.001 0 0 0 8 .198Z"/></svg>
                                GitHub
                            </a>
                            <a href="https://linguaharu.harukayang.xyz/" target="_blank" class="more-info-button action-demo" onclick="event.stopPropagation()">
                                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                <span data-i18n="portfolio.liveDemo">Live Demo</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section contact" id="contact">
            <div class="section-header">
                <h2 data-i18n="contact.title">Contact</h2>
                <p data-i18n="contact.subtitle">Let's Create Something Beautiful</p>
            </div>
            <div class="contact-links">
                <a href="https://github.com/YANG-Haruka" target="_blank" class="contact-link">
                    <div class="contact-link-icon">
                        <img src="imgs/github.png" alt="GitHub">
                    </div>
                    <span>GitHub</span>
                </a>
                <a href="mailto:yjz.haruka@gmail.com" class="contact-link">
                    <div class="contact-link-icon">
                        <img src="imgs/gmail.png" alt="Gmail">
                    </div>
                    <span>Email</span>
                </a>
                <a href="https://www.linkedin.com/in/yang-haruka/" target="_blank" class="contact-link">
                    <div class="contact-link-icon">
                        <img src="imgs/linkedin.png" alt="LinkedIn">
                    </div>
                    <span>LinkedIn</span>
                </a>
                <a href="#" class="contact-link qq-contact">
                    <div class="contact-link-icon">
                        <img src="imgs/QQ.png" alt="QQ">
                    </div>
                    <span>QQ</span>
                </a>
                <a href="#" class="contact-link wechat-contact">
                    <div class="contact-link-icon">
                        <img src="imgs/wechat.png" alt="WeChat">
                    </div>
                    <span>WeChat</span>
                </a>
            </div>
        </section>

        <div class="social-sidebar">
            <a href="https://github.com/YANG-Haruka" target="_blank">
                <img src="imgs/github.png" alt="GitHub">
            </a>
            <a href="mailto:yjz.haruka@gmail.com">
                <img src="imgs/gmail.png" alt="Gmail">
            </a>
            <a href="https://www.linkedin.com/in/yang-haruka/" target="_blank">
                <img src="imgs/linkedin.png" alt="LinkedIn">
            </a>
            <a href="#" id="qq-link">
                <img src="imgs/QQ.png" alt="QQ">
            </a>
            <a href="#" id="wechat-link">
                <img src="imgs/wechat.png" alt="WeChat">
            </a>
        </div>

        <div class="modal" id="qq-modal">
            <div class="modal-content">
                <span class="close-modal" id="close-qq">&times;</span>
                <img src="imgs/QQ_ADDME.png" alt="QQ Contact">
            </div>
        </div>

        <div class="modal" id="wechat-modal">
            <div class="modal-content">
                <span class="close-modal" id="close-wechat">&times;</span>
                <img src="imgs/WeChat_ADDME.JPG" alt="WeChat Contact">
            </div>
        </div>
    </div>

    <script>
        // ========== THREE.JS SHINKAI-STYLE TWILIGHT SKY ==========

        let scene, camera, renderer;
        let starField, meteors = [];
        let starGlowTexture, meteorGlowTexture;
        let width, height;
        const isMobile = /Android|iPhone|iPad|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                         (window.innerWidth <= 768 && ('ontouchstart' in window));
        const mobileMaxSprites = 30;
        const MAX_METEORS = isMobile ? 4 : 10;
        const clock = new THREE.Clock();
        let isPageVisible = true;
        let meteorTimer = 0;
        let nextMeteorDelay = 4000 + Math.random() * 4000;
        let lastFrameTime = 0;

        // Initialize Three.js
        function init() {
            width = window.innerWidth;
            height = window.innerHeight;

            scene = new THREE.Scene();

            camera = new THREE.OrthographicCamera(
                -width / 2, width / 2,
                height / 2, -height / 2,
                0.1, 1000
            );
            camera.position.z = 100;

            const maxPixelRatio = isMobile ? 1.5 : 2;
            renderer = new THREE.WebGLRenderer({
                antialias: !isMobile,
                alpha: false,
                powerPreference: 'high-performance'
            });
            renderer.setSize(width, height);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, maxPixelRatio));

            document.getElementById('sky-container').appendChild(renderer.domElement);

            // Create textures
            starGlowTexture = createStarGlowTexture();
            meteorGlowTexture = createMeteorGlowTexture();

            createSkyBackground();
            createStarField();

            window.addEventListener('resize', onResize);
        }

        // Create four-pointed star texture (twinkling star shape)
        function createStarGlowTexture() {
            const size = 128;
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            const cx = size / 2;
            const cy = size / 2;

            // Clear
            ctx.clearRect(0, 0, size, size);

            // Draw four-pointed star with glow
            // Vertical spike
            const vGrad = ctx.createLinearGradient(cx, 0, cx, size);
            vGrad.addColorStop(0, 'rgba(255, 255, 255, 0)');
            vGrad.addColorStop(0.35, 'rgba(220, 240, 255, 0.15)');
            vGrad.addColorStop(0.5, 'rgba(255, 255, 255, 1)');
            vGrad.addColorStop(0.65, 'rgba(220, 240, 255, 0.15)');
            vGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.fillStyle = vGrad;
            ctx.beginPath();
            ctx.moveTo(cx, 0);
            ctx.lineTo(cx + 3, cy);
            ctx.lineTo(cx, size);
            ctx.lineTo(cx - 3, cy);
            ctx.closePath();
            ctx.fill();

            // Horizontal spike
            const hGrad = ctx.createLinearGradient(0, cy, size, cy);
            hGrad.addColorStop(0, 'rgba(255, 255, 255, 0)');
            hGrad.addColorStop(0.35, 'rgba(220, 240, 255, 0.15)');
            hGrad.addColorStop(0.5, 'rgba(255, 255, 255, 1)');
            hGrad.addColorStop(0.65, 'rgba(220, 240, 255, 0.15)');
            hGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.fillStyle = hGrad;
            ctx.beginPath();
            ctx.moveTo(0, cy);
            ctx.lineTo(cx, cy + 3);
            ctx.lineTo(size, cy);
            ctx.lineTo(cx, cy - 3);
            ctx.closePath();
            ctx.fill();

            // Diagonal spikes (shorter)
            ctx.save();
            ctx.translate(cx, cy);
            ctx.rotate(Math.PI / 4);
            ctx.translate(-cx, -cy);

            const d1Grad = ctx.createLinearGradient(cx, size * 0.2, cx, size * 0.8);
            d1Grad.addColorStop(0, 'rgba(255, 255, 255, 0)');
            d1Grad.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');
            d1Grad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.fillStyle = d1Grad;
            ctx.beginPath();
            ctx.moveTo(cx, size * 0.2);
            ctx.lineTo(cx + 2, cy);
            ctx.lineTo(cx, size * 0.8);
            ctx.lineTo(cx - 2, cy);
            ctx.closePath();
            ctx.fill();

            const d2Grad = ctx.createLinearGradient(size * 0.2, cy, size * 0.8, cy);
            d2Grad.addColorStop(0, 'rgba(255, 255, 255, 0)');
            d2Grad.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');
            d2Grad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.fillStyle = d2Grad;
            ctx.beginPath();
            ctx.moveTo(size * 0.2, cy);
            ctx.lineTo(cx, cy + 2);
            ctx.lineTo(size * 0.8, cy);
            ctx.lineTo(cx, cy - 2);
            ctx.closePath();
            ctx.fill();

            ctx.restore();

            // Bright center core
            const coreGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 8);
            coreGrad.addColorStop(0, 'rgba(255, 255, 255, 1)');
            coreGrad.addColorStop(0.5, 'rgba(255, 255, 255, 0.8)');
            coreGrad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.fillStyle = coreGrad;
            ctx.beginPath();
            ctx.arc(cx, cy, 8, 0, Math.PI * 2);
            ctx.fill();

            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;
            return texture;
        }

        // Create softer glow texture for meteor trail
        function createMeteorGlowTexture() {
            const size = 128;
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            // Softer, less saturated blue
            const gradient = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
            gradient.addColorStop(0, 'rgba(255, 255, 255, 0.9)');
            gradient.addColorStop(0.1, 'rgba(230, 245, 255, 0.7)');
            gradient.addColorStop(0.25, 'rgba(200, 230, 250, 0.4)');
            gradient.addColorStop(0.45, 'rgba(170, 210, 240, 0.2)');
            gradient.addColorStop(0.7, 'rgba(150, 195, 230, 0.08)');
            gradient.addColorStop(1, 'rgba(140, 185, 220, 0)');

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);

            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;
            return texture;
        }

        // Sky gradient background
        function createSkyBackground() {
            const skyGeometry = new THREE.PlaneGeometry(width * 1.5, height * 1.5);

            const skyMaterial = new THREE.ShaderMaterial({
                uniforms: {},
                vertexShader: `
                    varying vec2 vUv;
                    void main() {
                        vUv = uv;
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    varying vec2 vUv;

                    vec3 gradient(float t) {
                        vec3 c0 = vec3(0.039, 0.086, 0.157);
                        vec3 c1 = vec3(0.071, 0.145, 0.29);
                        vec3 c2 = vec3(0.118, 0.227, 0.373);
                        vec3 c3 = vec3(0.239, 0.165, 0.361);
                        vec3 c4 = vec3(0.361, 0.239, 0.361);
                        vec3 c5 = vec3(0.545, 0.353, 0.42);
                        vec3 c6 = vec3(0.769, 0.471, 0.353);
                        vec3 c7 = vec3(0.831, 0.647, 0.455);

                        if (t < 0.25) return mix(c0, c1, t / 0.25);
                        if (t < 0.45) return mix(c1, c2, (t - 0.25) / 0.2);
                        if (t < 0.6) return mix(c2, c3, (t - 0.45) / 0.15);
                        if (t < 0.75) return mix(c3, c4, (t - 0.6) / 0.15);
                        if (t < 0.85) return mix(c4, c5, (t - 0.75) / 0.1);
                        if (t < 0.92) return mix(c5, c6, (t - 0.85) / 0.07);
                        return mix(c6, c7, (t - 0.92) / 0.08);
                    }

                    void main() {
                        float t = 1.0 - vUv.y;
                        vec3 color = gradient(t);
                        gl_FragColor = vec4(color, 1.0);
                    }
                `,
                depthWrite: false
            });

            skyMesh = new THREE.Mesh(skyGeometry, skyMaterial);
            skyMesh.position.z = -50;
            scene.add(skyMesh);
        }

        // Create twinkling four-pointed star field
        function createStarField() {
            const maxStars = isMobile ? 100 : 200;
            const starDensity = isMobile ? 8000 : 5500;
            const starCount = Math.min(maxStars, Math.floor((width * height) / starDensity));

            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(starCount * 3);
            const sizes = new Float32Array(starCount);
            const phases = new Float32Array(starCount);
            const speeds = new Float32Array(starCount);
            const baseAlphas = new Float32Array(starCount);
            const rotations = new Float32Array(starCount);

            for (let i = 0; i < starCount; i++) {
                const x = (Math.random() - 0.5) * width;
                const y = (Math.random() * 0.82) * height - height * 0.18;
                const z = -5;

                positions[i * 3] = x;
                positions[i * 3 + 1] = y;
                positions[i * 3 + 2] = z;

                // Varied sizes for four-pointed stars (smaller on mobile)
                const sizeFactor = Math.random();
                const sizeScale = isMobile ? 0.7 : 1.0;
                if (sizeFactor < 0.65) {
                    sizes[i] = (8 + Math.random() * 10) * sizeScale;   // Small stars
                } else if (sizeFactor < 0.88) {
                    sizes[i] = (18 + Math.random() * 14) * sizeScale;  // Medium stars
                } else {
                    sizes[i] = (32 + Math.random() * 20) * sizeScale;  // Large bright stars
                }

                phases[i] = Math.random() * Math.PI * 2;
                speeds[i] = 1.2 + Math.random() * 2.0;  // Faster twinkle
                rotations[i] = Math.random() * Math.PI * 0.25;  // Slight rotation variation

                // Fade near horizon
                const normalizedY = (y + height * 0.18) / height;
                const horizonFade = normalizedY > 0.25 ? 1.0 : Math.pow(normalizedY / 0.25, 0.6);
                baseAlphas[i] = (0.5 + Math.random() * 0.5) * horizonFade;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            geometry.setAttribute('phase', new THREE.BufferAttribute(phases, 1));
            geometry.setAttribute('speed', new THREE.BufferAttribute(speeds, 1));
            geometry.setAttribute('baseAlpha', new THREE.BufferAttribute(baseAlphas, 1));
            geometry.setAttribute('rotation', new THREE.BufferAttribute(rotations, 1));

            const material = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0 },
                    starTexture: { value: starGlowTexture },
                    pixelRatio: { value: renderer.getPixelRatio() }
                },
                vertexShader: `
                    attribute float size;
                    attribute float phase;
                    attribute float speed;
                    attribute float baseAlpha;
                    attribute float rotation;
                    uniform float time;
                    uniform float pixelRatio;
                    varying float vAlpha;
                    varying float vRotation;

                    void main() {
                        // Twinkling effect - faster, sharper pulsing
                        float twinkle = sin(time * speed * 1.5 + phase) * 0.4 +
                                       sin(time * speed * 3.2 + phase * 1.7) * 0.3 +
                                       sin(time * speed * 1.1 + phase * 3.1) * 0.2;

                        // Alpha pulses strongly for crisp "blinking" effect
                        vAlpha = baseAlpha * (0.2 + max(0.0, twinkle + 0.8));

                        // Size pulses with twinkle
                        float sizeVar = size * (0.65 + twinkle * 0.5 + 0.35);

                        vRotation = rotation + time * 0.15;

                        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                        gl_PointSize = sizeVar * pixelRatio;
                        gl_Position = projectionMatrix * mvPosition;
                    }
                `,
                fragmentShader: `
                    uniform sampler2D starTexture;
                    varying float vAlpha;
                    varying float vRotation;

                    void main() {
                        // Rotate UV coordinates for varied star orientations
                        vec2 uv = gl_PointCoord - 0.5;
                        float c = cos(vRotation);
                        float s = sin(vRotation);
                        uv = vec2(uv.x * c - uv.y * s, uv.x * s + uv.y * c) + 0.5;

                        vec4 texColor = texture2D(starTexture, uv);
                        gl_FragColor = vec4(texColor.rgb, texColor.a * vAlpha);
                    }
                `,
                transparent: true,
                depthWrite: false,
                blending: THREE.AdditiveBlending
            });

            starField = new THREE.Points(geometry, material);
            scene.add(starField);
        }

        // Shinkai-style asymmetric Meteor with feathered trail
        class Meteor {
            constructor() {
                this.active = true;
                this.group = new THREE.Group();
                this.sprites = [];
                this.coreSprites = [];
                this.maxSprites = isMobile ? mobileMaxSprites : 60;
                this.reset();
            }

            reset() {
                // Clear existing sprites
                this.sprites.forEach(s => {
                    this.group.remove(s);
                    s.material.dispose();
                });
                this.coreSprites.forEach(s => {
                    this.group.remove(s);
                    s.material.dispose();
                });
                this.sprites = [];
                this.coreSprites = [];

                // Asymmetry parameters - one side more diffuse
                this.asymmetryDir = Math.random() > 0.5 ? 1 : -1;
                this.asymmetryAmount = 0.3 + Math.random() * 0.4;

                // Pre-create outer glow sprites (asymmetric)
                for (let i = 0; i < this.maxSprites; i++) {
                    const material = new THREE.SpriteMaterial({
                        map: meteorGlowTexture,
                        transparent: true,
                        blending: THREE.AdditiveBlending,
                        depthWrite: false
                    });
                    const sprite = new THREE.Sprite(material);
                    sprite.visible = false;
                    this.sprites.push(sprite);
                    this.group.add(sprite);
                }

                // Pre-create core line sprites (brighter, thinner)
                for (let i = 0; i < this.maxSprites; i++) {
                    const material = new THREE.SpriteMaterial({
                        map: meteorGlowTexture,
                        transparent: true,
                        blending: THREE.AdditiveBlending,
                        depthWrite: false
                    });
                    const sprite = new THREE.Sprite(material);
                    sprite.visible = false;
                    this.coreSprites.push(sprite);
                    this.group.add(sprite);
                }

                // Start position
                this.startX = (Math.random() - 0.5) * width * 0.85;
                this.startY = height / 2 + 50;

                // Direction
                const horizontalBias = (Math.random() - 0.5) * 0.6;
                this.dirX = horizontalBias;
                this.dirY = -1;
                const len = Math.sqrt(this.dirX * this.dirX + this.dirY * this.dirY);
                this.dirX /= len;
                this.dirY /= len;

                // Perpendicular direction for offset
                this.perpX = -this.dirY;
                this.perpY = this.dirX;

                // Subtle curve
                this.curvature = (Math.random() - 0.5) * 0.0006;
                this.wobbleFreq = 0.012 + Math.random() * 0.008;
                this.wobbleAmp = 0.06 + Math.random() * 0.04;

                this.x = this.startX;
                this.y = this.startY;
                this.speed = 2.2 + Math.random() * 1.2;
                this.time = 0;

                this.trail = [];
                this.maxTrailLength = this.maxSprites;

                this.totalDistance = height * (0.5 + Math.random() * 0.35);
                this.traveled = 0;

                this.opacity = 0;
                this.fadeIn = true;
                this.fadeOut = false;
                this.currentScale = 1.0;

                scene.add(this.group);
                this.active = true;
            }

            update() {
                if (!this.active) return;

                // Fade in
                if (this.fadeIn) {
                    this.opacity = Math.min(1, this.opacity + 0.05);
                    if (this.opacity >= 1) this.fadeIn = false;
                }

                // Fade out
                if (this.fadeOut) {
                    this.fadeOutTimer = (this.fadeOutTimer || 0) + 1;
                    this.opacity = Math.max(0, this.opacity - 0.015);
                    if (this.trail.length > 0 && this.fadeOutTimer % 2 === 0) {
                        this.trail.pop();
                    }
                    // Dispose when fully faded and trail empty, or safety timeout
                    if ((this.opacity <= 0 && this.trail.length === 0) || this.fadeOutTimer > 180) {
                        this.dispose();
                        return;
                    }
                }

                if (!this.fadeOut) {
                    this.time++;

                    const wobble = Math.sin(this.time * this.wobbleFreq) * this.wobbleAmp;
                    const curveOffset = this.curvature * this.time;

                    this.x += (this.dirX + wobble * 0.08 + curveOffset) * this.speed;
                    this.y += this.dirY * this.speed;
                    this.traveled += this.speed;

                    const fallProgress = this.traveled / this.totalDistance;
                    this.currentScale = Math.max(0.2, 1 - fallProgress * 0.65);

                    this.trail.unshift({
                        x: this.x,
                        y: this.y,
                        scale: this.currentScale
                    });

                    if (this.trail.length > this.maxTrailLength) {
                        this.trail.pop();
                    }

                    if (this.traveled >= this.totalDistance) {
                        this.fadeOut = true;
                    }
                }

                this.updateSprites();
            }

            updateSprites() {
                const len = this.trail.length;
                if (len < 2) return;

                for (let i = 0; i < this.maxSprites; i++) {
                    const sprite = this.sprites[i];
                    const coreSprite = this.coreSprites[i];

                    if (i < len) {
                        const point = this.trail[i];
                        const progress = i / len;

                        // Non-linear alpha - dissolves organically
                        const alphaCurve = Math.pow(1 - progress, 1.4);

                        // Asymmetric width - like feather shape
                        let sizeMult, offset;
                        if (progress < 0.08) {
                            // Sharp tip
                            sizeMult = 0.3 + progress * 8;
                            offset = 0;
                        } else if (progress < 0.25) {
                            // Narrow head section
                            const t = (progress - 0.08) / 0.17;
                            sizeMult = 0.94 + t * 0.6;
                            offset = t * 3 * this.asymmetryDir;
                        } else if (progress < 0.55) {
                            // Wide middle - asymmetric bulge
                            const t = (progress - 0.25) / 0.3;
                            sizeMult = 1.54 + Math.sin(t * Math.PI) * 0.8;
                            offset = (3 + Math.sin(t * Math.PI) * 8) * this.asymmetryDir * this.asymmetryAmount;
                        } else {
                            // Dissolving tail - expands asymmetrically then fades
                            const t = (progress - 0.55) / 0.45;
                            sizeMult = (1.54 + 0.8) * (1 - t * 0.5) * (1 + t * 0.3);
                            offset = (11 * this.asymmetryAmount) * (1 - t * 0.7) * this.asymmetryDir;
                        }

                        // Outer glow - larger, offset to one side
                        const meteorSizeScale = isMobile ? 0.65 : 1.0;
                        const baseSize = 40 * point.scale * sizeMult * meteorSizeScale;
                        const alpha = alphaCurve * this.opacity * point.scale * 0.7;

                        const offsetX = this.perpX * offset * point.scale;
                        const offsetY = this.perpY * offset * point.scale;

                        sprite.position.set(
                            point.x + offsetX,
                            point.y + offsetY,
                            i * 0.01
                        );
                        sprite.scale.set(baseSize, baseSize * 0.85, 1);
                        sprite.material.opacity = alpha * 0.6;  // Softer
                        sprite.material.color.setHSL(0.57, 0.35, 0.55 + (1 - progress) * 0.25);  // Less saturated
                        sprite.visible = alpha > 0.008;

                        // Core line - thinner, softer
                        const coreSize = 10 * point.scale * (1 - progress * 0.7);
                        const coreAlpha = Math.pow(1 - progress, 2.2) * this.opacity * point.scale * 0.8;
                        const coreOffset = -offset * 0.15;

                        coreSprite.position.set(
                            point.x + this.perpX * coreOffset * point.scale,
                            point.y + this.perpY * coreOffset * point.scale,
                            i * 0.01 + 0.5
                        );
                        coreSprite.scale.set(coreSize, coreSize, 1);
                        coreSprite.material.opacity = coreAlpha;
                        coreSprite.material.color.setHSL(0.58, 0.15, 0.9);  // Less saturated
                        coreSprite.visible = coreAlpha > 0.02;

                    } else {
                        sprite.visible = false;
                        coreSprite.visible = false;
                    }
                }

                // Softer head
                if (len > 0 && !this.fadeOut) {
                    const headScale = isMobile ? 0.65 : 1.0;
                    const headSprite = this.sprites[0];
                    headSprite.material.opacity = this.opacity * 0.7;
                    headSprite.material.color.setHSL(0.57, 0.25, 0.8);
                    headSprite.scale.set(18 * this.currentScale * headScale, 18 * this.currentScale * headScale, 1);
                    headSprite.position.set(this.trail[0].x, this.trail[0].y, 0.6);

                    const headCore = this.coreSprites[0];
                    headCore.material.opacity = this.opacity * 0.9;
                    headCore.material.color.setHSL(0.58, 0.1, 0.95);
                    headCore.scale.set(6 * this.currentScale * headScale, 6 * this.currentScale * headScale, 1);
                    headCore.position.set(this.trail[0].x, this.trail[0].y, 0.7);
                }
            }

            dispose() {
                this.active = false;
                scene.remove(this.group);
                this.sprites.forEach(s => s.material.dispose());
                this.coreSprites.forEach(s => s.material.dispose());
                this.sprites = [];
                this.coreSprites = [];
            }
        }

        function spawnMeteor() {
            // Clean up inactive meteors
            for (let i = meteors.length - 1; i >= 0; i--) {
                if (!meteors[i].active) {
                    meteors.splice(i, 1);
                }
            }

            // Spawn if under limit
            if (meteors.length < MAX_METEORS) {
                const meteor = new Meteor();
                meteors.push(meteor);
                return true;
            }
            return false;
        }

        let skyMesh = null;

        function onResize() {
            width = window.innerWidth;
            height = window.innerHeight;

            // Update camera
            camera.left = -width / 2;
            camera.right = width / 2;
            camera.top = height / 2;
            camera.bottom = -height / 2;
            camera.updateProjectionMatrix();

            // Update renderer
            renderer.setSize(width, height);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Update star field uniforms
            if (starField && starField.material.uniforms.pixelRatio) {
                starField.material.uniforms.pixelRatio.value = renderer.getPixelRatio();
            }

            // Update sky background size
            if (skyMesh) {
                skyMesh.geometry.dispose();
                skyMesh.geometry = new THREE.PlaneGeometry(width * 1.5, height * 1.5);
            }
        }

        function animate(timestamp) {
            requestAnimationFrame(animate);

            // Skip rendering when page is hidden
            if (!isPageVisible) {
                lastFrameTime = timestamp;
                return;
            }

            // Calculate real delta time, capped to prevent large jumps
            if (lastFrameTime === 0) lastFrameTime = timestamp;
            const rawDelta = timestamp - lastFrameTime;
            // Cap delta at 100ms to prevent burst after tab switch
            const delta = Math.min(rawDelta, 100);
            lastFrameTime = timestamp;

            const time = clock.getElapsedTime();

            if (starField) {
                starField.material.uniforms.time.value = time;
            }

            // Auto-spawn meteors using frame-based timing
            meteorTimer += delta;
            if (meteorTimer >= nextMeteorDelay) {
                meteorTimer = 0;
                nextMeteorDelay = 4000 + Math.random() * 4000;
                spawnMeteor();
            }

            // Update meteors
            for (let i = meteors.length - 1; i >= 0; i--) {
                if (meteors[i].active) {
                    meteors[i].update();
                }
                if (!meteors[i].active) {
                    meteors.splice(i, 1);
                }
            }

            renderer.render(scene, camera);
        }

        // Handle page visibility changes to prevent meteor bursts
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                isPageVisible = false;
                clock.stop();
            } else {
                isPageVisible = true;
                clock.start();
                // Reset meteor timer to prevent burst spawning
                meteorTimer = 0;
                nextMeteorDelay = 2000 + Math.random() * 3000;
                lastFrameTime = 0;
            }
        });

        // Initialize
        init();
        animate(0);

        // Spawn initial meteor after a short delay via timer
        meteorTimer = nextMeteorDelay - 500;

        // Click to spawn - use mousedown for more reliable detection
        document.addEventListener('mousedown', function(e) {
            // Check if click is on interactive element
            const target = e.target;
            const interactiveSelectors = 'a, button, input, textarea, select, .contact-link, .portfolio-item, .nav, .modal, .social-sidebar, .cta-button, .more-info-button, .close-modal, .lang-switcher';

            if (!target.closest(interactiveSelectors)) {
                e.preventDefault();
                spawnMeteor();
            }
        });

        // Also support touch
        document.addEventListener('touchstart', function(e) {
            const target = e.target;
            const interactiveSelectors = 'a, button, input, textarea, select, .contact-link, .portfolio-item, .nav, .modal, .social-sidebar, .cta-button, .more-info-button, .close-modal, .lang-switcher';

            if (!target.closest(interactiveSelectors)) {
                spawnMeteor();
            }
        }, { passive: true });

        // ========== CUSTOM CURSOR ==========
        const cursor = document.getElementById('custom-cursor');

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        document.addEventListener('mousedown', () => {
            cursor.classList.add('clicking');
        });

        document.addEventListener('mouseup', () => {
            cursor.classList.remove('clicking');
        });

        // Hide cursor when leaving window
        document.addEventListener('mouseleave', () => {
            cursor.style.opacity = '0';
        });

        document.addEventListener('mouseenter', () => {
            cursor.style.opacity = '1';
        });

        // Hover state for interactive elements
        const interactiveElements = document.querySelectorAll('a, button, .contact-link, .portfolio-item, .cta-button, .more-info-button, .close-modal');
        interactiveElements.forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursor.classList.add('hovering');
            });
            el.addEventListener('mouseleave', () => {
                cursor.classList.remove('hovering');
            });
        });

        // ========== UI INTERACTIONS ==========

        // Smooth scroll (skip bare "#" links to avoid querySelector error)
        document.querySelectorAll('a[href^="#"]:not([href="#"])').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Nav scroll effect
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('.nav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Modal handlers
        const qqLink = document.getElementById('qq-link');
        const qqModal = document.getElementById('qq-modal');
        const closeQQ = document.getElementById('close-qq');
        const qqContacts = document.querySelectorAll('.qq-contact');

        const wechatLink = document.getElementById('wechat-link');
        const wechatModal = document.getElementById('wechat-modal');
        const closeWechat = document.getElementById('close-wechat');
        const wechatContacts = document.querySelectorAll('.wechat-contact');

        function openModal(modal) {
            modal.style.display = 'flex';
        }

        function closeModal(modal) {
            modal.style.display = 'none';
        }

        if (qqLink) qqLink.addEventListener('click', e => { e.preventDefault(); openModal(qqModal); });
        if (closeQQ) closeQQ.addEventListener('click', () => closeModal(qqModal));
        qqContacts.forEach(c => c.addEventListener('click', e => { e.preventDefault(); openModal(qqModal); }));

        if (wechatLink) wechatLink.addEventListener('click', e => { e.preventDefault(); openModal(wechatModal); });
        if (closeWechat) closeWechat.addEventListener('click', () => closeModal(wechatModal));
        wechatContacts.forEach(c => c.addEventListener('click', e => { e.preventDefault(); openModal(wechatModal); }));

        window.addEventListener('click', function(e) {
            if (e.target === qqModal) closeModal(qqModal);
            if (e.target === wechatModal) closeModal(wechatModal);
        });

        // Portfolio item animations on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -80px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, index * 100);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.portfolio-item').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(40px)';
            el.style.transition = 'opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            observer.observe(el);
        });

    </script>

    <!-- i18n Configuration -->
    <script src="js/i18n.js"></script>
    <script>
        // Initialize i18n when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await window.i18nConfig.init();
            } catch (e) {
                console.warn('i18n initialization failed:', e);
            }
            // Always init switcher even if i18n fails
            window.i18nConfig.initSwitcher();
        });
    </script>
</body>
</html>
